<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="language" content="en" />
        <link href="./assets/afbdca15/css/bootstrap.css" rel="stylesheet">
<link href="./assets/9af5cddc/solarized_light.css" rel="stylesheet">
<link href="./assets/34135542/style.css" rel="stylesheet">
<script src="./assets/84a200c2/jquery.js"></script>
<script src="./assets/afbdca15/js/bootstrap.js"></script>
<script src="./assets/96f6715f/jssearch.js"></script>    <title>Generators - Others - KHanUtilsGuide</title>
</head>
<body>

<div class="wrap">
    <nav id="w138" class="navbar-inverse navbar-fixed-top navbar"><div class="navbar-header"><button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#w138-collapse"><span class="sr-only">Toggle navigation</span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
<span class="icon-bar"></span></button><a class="navbar-brand" href="./guide-index.html">KHanUtilsGuide</a></div><div id="w138-collapse" class="collapse navbar-collapse"><ul id="w139" class="navbar-nav nav"><li><a href="./g_README.html">Guide</a></li></ul><div class="navbar-form navbar-left" role="search">
  <div class="form-group">
    <input id="searchbox" type="text" class="form-control" placeholder="Search">
  </div>
</div>
</div></nav>
    <div id="search-resultbox" style="display: none;" class="modal-content">
        <ul id="search-results">
        </ul>
    </div>

    
<div class="row">
    <div class="col-md-2">
                <div id="navigation" class="list-group"><a class="list-group-item" href="#navigation-126" data-toggle="collapse" data-parent="#navigation">Documentation <b class="caret"></b></a><div id="navigation-126" class="submenu panel-collapse collapse"><a class="list-group-item" href="./g_documents.html">Document Tips and Tricks</a>
<a class="list-group-item" href="./g_persian.html">Setup for Persian</a>
<a class="list-group-item" href="./g_full-config.html">Complete Config</a>
<a class="list-group-item" href="./g_workflow.html">Workflow</a></div>
<a class="list-group-item" href="#navigation-127" data-toggle="collapse" data-parent="#navigation">Behaviors <b class="caret"></b></a><div id="navigation-127" class="submenu panel-collapse collapse"><a class="list-group-item" href="./g_workflow.html#WorkflowBehavior">WorkflowBehavior</a>
<a class="list-group-item" href="./g_behaviors-eav-behavior.html">EavBehavior</a>
<a class="list-group-item" href="./g_behaviors-eav-trait.html">EavQueryTrait</a></div>
<a class="list-group-item" href="#navigation-128" data-toggle="collapse" data-parent="#navigation">Components <b class="caret"></b></a><div id="navigation-128" class="submenu panel-collapse collapse"><a class="list-group-item" href="./g_components-array-helper.html">Array Helper</a>
<a class="list-group-item" href="./g_components-file-helper.html">File Helper</a>
<a class="list-group-item" href="./g_components-jalali.html">Jalali and JalaliX</a>
<a class="list-group-item" href="./g_components-math-helper.html">Math Helper</a>
<a class="list-group-item" href="./g_components-sql-formatter.html">SQL Formatter</a>
<a class="list-group-item" href="./g_components-string-helper.html">String Helper</a>
<a class="list-group-item" href="./g_components-view-helper.html">View Helper</a></div>
<a class="list-group-item" href="#navigation-129" data-toggle="collapse" data-parent="#navigation">Controllers <b class="caret"></b></a><div id="navigation-129" class="submenu panel-collapse collapse"><a class="list-group-item" href="./g_controllers-khan-console.html">KHan Console</a>
<a class="list-group-item" href="./g_controllers-khan-rest.html">KHan Rest</a>
<a class="list-group-item" href="./g_controllers-khan-web.html">KHan Web</a>
<a class="list-group-item" href="./g_controllers-system-tables.html">System Tables</a></div>
<a class="list-group-item" href="#navigation-130" data-toggle="collapse" data-parent="#navigation">Columns <b class="caret"></b></a><div id="navigation-130" class="submenu panel-collapse collapse"><a class="list-group-item" href="./g_columns-action-column.html">Action Column</a>
<a class="list-group-item" href="./g_columns-boolean-column.html">Boolean Column</a>
<a class="list-group-item" href="./g_columns-data-column.html">Data Column</a>
<a class="list-group-item" href="./g_columns-enum-column.html">Enum Column</a>
<a class="list-group-item" href="./g_columns-jalali-column.html">Jalali Column</a>
<a class="list-group-item" href="./g_workflow.html#ProgressColumn">Progress Column</a>
<a class="list-group-item" href="./g_columns-radio-column.html">Radio Column</a>
<a class="list-group-item" href="./g_columns-related-column.html">Related Column</a></div>
<a class="list-group-item" href="#navigation-131" data-toggle="collapse" data-parent="#navigation">Models <b class="caret"></b></a><div id="navigation-131" class="submenu panel-collapse collapse"><a class="list-group-item" href="./g_models-khan-model.html">Base Model</a>
<a class="list-group-item" href="./g_models-khan-user.html">Base user</a>
<a class="list-group-item" href="./g_models-khan-identity.html">Identity</a></div>
<a class="list-group-item" href="#navigation-132" data-toggle="collapse" data-parent="#navigation">RBAC <b class="caret"></b></a><div id="navigation-132" class="submenu panel-collapse collapse"><a class="list-group-item" href="./g_rbac-rule-owner.html">Owner Rule</a></div>
<a class="list-group-item" href="#navigation-133" data-toggle="collapse" data-parent="#navigation">Widgets <b class="caret"></b></a><div id="navigation-133" class="submenu panel-collapse collapse"><a class="list-group-item" href="./g_widgets-date-picker.html">Date Picker</a>
<a class="list-group-item" href="./g_widgets-date-range-picker.html">Date Range Picker</a>
<a class="list-group-item" href="./g_widgets-grid-view.html">Grid View</a>
<a class="list-group-item" href="./g_widgets-dropdown.html">AJAX Dropdown</a>
<a class="list-group-item" href="./g_widgets-export-menu.html">Export Menu</a>
<a class="list-group-item" href="./g_widgets-confirm-button.html">Confirm Button</a>
<a class="list-group-item" href="./g_widgets-captcha.html">Captcha</a>
<a class="list-group-item" href="./g_widgets-export-menu.html">ExportMenu</a></div>
<a class="list-group-item active" href="#navigation-134" data-toggle="collapse" data-parent="#navigation">Others <b class="caret"></b></a><div id="navigation-134" class="submenu panel-collapse collapse in"><a class="list-group-item" href="./g_helpers-app-builder.html">App Builder</a>
<a class="list-group-item" href="./g_helpers-system-table-builder.html">System table Builder</a>
<a class="list-group-item active" href="./g_helpers-genrators.html">Generators</a>
<a class="list-group-item" href="./g_components-var-dump.html">VarDump</a>
<a class="list-group-item" href="./g_components-sql-formatter.html">SqlFormatter</a>
<a class="list-group-item" href="./g_settings.html">Settings</a>
<a class="list-group-item" href="./g_helpers-migrations.html">Migrations</a>
<a class="list-group-item" href="./g_widgets-menu.html">Overlay Menu</a>
<a class="list-group-item" href="./g_components-workflow.html">Workflow Manager</a>
<a class="list-group-item" href="./g_components-wiz-flow.html">Wizard Flow</a>
<a class="list-group-item" href="./g_tests.html">Tests</a>
<a class="list-group-item" href="./g_module-khan-tools.html">Tools Module</a></div>
<a class="list-group-item" href="#navigation-135" data-toggle="collapse" data-parent="#navigation">StartUp <b class="caret"></b></a><div id="navigation-135" class="submenu panel-collapse collapse"></div>
<a class="list-group-item" href="#navigation-136" data-toggle="collapse" data-parent="#navigation">Sanitizing User Input <b class="caret"></b></a><div id="navigation-136" class="submenu panel-collapse collapse"></div>
<a class="list-group-item" href="#navigation-137" data-toggle="collapse" data-parent="#navigation">RBAC Setup <b class="caret"></b></a><div id="navigation-137" class="submenu panel-collapse collapse"></div></div>    </div>
    <div class="col-md-9 guide-content" role="main">
        <h1>Generators <span id="generators"></span><a href="#generators" class="hashlink">&para;</a></h1>
<div class="toc"><ol><li><a href="#form-generator">Form Generator</a></li>
<li><a href="#model-generators">Model Generators</a></li>
<li><a href="#controller-generator">Controller Generator</a></li>
<li><a href="#crud-generators">CRUD Generators</a></li></ol></div>
<p>Documentation Edition: 1.2-971126
Class Version: 0.4.0-971122</p>
<p><code>Yii2</code> comes with a handful of good generators for agile development. In addition to that, <code>johnitvn/yii2-ajaxcrud</code> has a very beautiful AJAX modal CRUD system.
So these generators are mostly useful for setting some defaults.</p>
<h2>Form Generator <span id="form-generator"></span><a href="#form-generator" class="hashlink">&para;</a></h2><p>Yii2 Form Generator only creates a view file for the given model. This version generates a very basic action file and a view containing a <code>kartik\form\ActiveForm</code>.</p>
<h2>Model Generators <span id="model-generators"></span><a href="#model-generators" class="hashlink">&para;</a></h2><ul>
<li><code>Default</code>: This generator is basically the same as the Yii version, except for the model base class and content of the query. The base class for the model is <code>khans\utils\models\KHanModel</code>. The query contains an empty body. </li>
<li><code>Eav</code>: This generator adds [EavBehavior] to model and [EavQueryTrait] to the accompanied query for EAV pattern.</li>
</ul>
<h2>Controller Generator <span id="controller-generator"></span><a href="#controller-generator" class="hashlink">&para;</a></h2><p>This generator is basically the same as the Yii version, except for the controller base class. The base class for the model is <code>\khans\utils\controllers\KHanWebController</code>.</p>
<h2>CRUD Generators <span id="crud-generators"></span><a href="#crud-generators" class="hashlink">&para;</a></h2><p>By setting <code>Enable EAV Pattern</code> the generated pages have extra required codes to manipulate EAV values flawlessly as genuine attributes of the model itself. At this time, sorting by EAV attributes is not implemented.
This generator has four templates:</p>
<ul>
<li><p><code>Default (giiCrudAjax)</code>: Generates an AJAX CRUD similar to <code>johnitvn/yii2-ajaxcrud</code>.</p>
<ul>
<li><code>controller</code> in this template has very little changes. Persian content, plus PJAX container ID depending the controller name.</li>
<li><code>_columns</code> has <code>\khans\utils\columns\ActionColumn</code> for ActionColumn, and <code>status</code>, <code>created_at</code>, and <code>updated_at</code> have their tuned columns.</li>
<li><code>_form</code> has specific form field for <code>status</code>, <code>created_at</code>, and <code>updated_at</code> attributes and <code>kartik\form\ActiveForm</code> as <code>form</code> element.</li>
<li><code>index</code> has <code>khans\utils\widgets\GridView</code> and PJAX id based on the controller.</li>
<li><code>_view</code> has specific form fields for <code>status</code>, <code>created_at</code>, and <code>updated_at</code> attributes.</li>
</ul>
</li>
<li><code>giiCrudList</code>: Generates a typical CRUD similar to <code>yii\gii\generators\crud\Generator</code>.</li>
<li><code>giiCrudUser</code>: Generates an AJAX CRUD based on <code>giiCrudAjax</code> specially designed to manger user tables.</li>
<li><code>giiCrudAuth</code>: Generates a normal CRUD based on <code>giiCrudList</code> for authentication tasks. This template has the option to generate form models (LoginForm, PasswordResetRequestForm, ResetPasswordForm, SignupForm) for authentication.</li>
</ul>
<p>The <code>search</code> model in the above templates (giiCurdAuth has not any search model, of course) has a class attribute for <code>$query</code> so the query can be set in the instantiating time to a desired filtered one, or let it be set to the old model by default.
<code>`</code>php
$searchModel = new namespace\ModelSearch(); //behaves as the original search model.
<code>`</code></p>
<p>Now imagine two related tables <code>Users</code> and <code>BooksRead</code>. In the parent table <code>Users</code> view you can add the following:
<code>`</code>php
$searchBooksRead = new namespace\BooksReadSearch(['query'=> $UsersModel->getBooksRead()]);
$dataProvider = $searchBooksRead-&gt;search(Yii::$app-&gt;request-&gt;queryParams);
khans\utils\widgets\GridView::widget([</p>
<pre><code class="hljs php"><span class="hljs-string">'id'</span>                 =&gt; <span class="hljs-string">'books-read-datatable-pjax'</span>,
<span class="hljs-string">'dataProvider'</span>       =&gt; <span class="hljs-variable">$dataProvider</span>,
<span class="hljs-string">'filterModel'</span>        =&gt; <span class="hljs-variable">$searchBooksRead</span>,
...
</code></pre>
<p>]);
<code>`</code>
The result is a list for a given record in <code>Users</code> table and below it a grid view containing all the records in <code>BooksRead</code> for the user.</p>
<p><strong><em>enableEAV</em></strong> in the CRUD generator lets the created <code>_columns</code>, <code>view</code>, and <code>_form</code> utilize EAV pattern for a model which is already designed for this pattern.</p>
        <div class="toplink"><a href="#" class="h1" title="go to top"><span class="glyphicon glyphicon-arrow-up"></a></div>
    </div>
</div>


</div>

<footer class="footer">
        <p class="pull-right"><small>Page generated on Fri, 15 Feb 2019 13:08:04 +0000</small></p>
    Powered by <a href="http://www.yiiframework.com/" rel="external">Yii Framework</a></footer>

<script>jQuery(function ($) {
    var shiftWindow = function () { scrollBy(0, -50) };
    if (location.hash) setTimeout(shiftWindow, 1);
    window.addEventListener("hashchange", shiftWindow);
var element = document.createElement("script");
element.src = "./jssearch.index.js";
document.body.appendChild(element);

var searchBox = $('#searchbox');

// search when typing in search field
searchBox.on("keyup", function(event) {
    var query = $(this).val();

    if (query == '' || event.which == 27) {
        $('#search-resultbox').hide();
        return;
    } else if (event.which == 13) {
        var selectedLink = $('#search-resultbox a.selected');
        if (selectedLink.length != 0) {
            document.location = selectedLink.attr('href');
            return;
        }
    } else if (event.which == 38 || event.which == 40) {
        $('#search-resultbox').show();

        var selected = $('#search-resultbox a.selected');
        if (selected.length == 0) {
            $('#search-results').find('a').first().addClass('selected');
        } else {
            var next;
            if (event.which == 40) {
                next = selected.parent().next().find('a').first();
            } else {
                next = selected.parent().prev().find('a').first();
            }
            if (next.length != 0) {
                var resultbox = $('#search-results');
                var position = next.position();

//              TODO scrolling is buggy and jumps around
//                resultbox.scrollTop(Math.floor(position.top));
//                console.log(position.top);

                selected.removeClass('selected');
                next.addClass('selected');
            }
        }

        return;
    }
    $('#search-resultbox').show();
    $('#search-results').html('<li><span class="no-results">No results</span></li>');

    var result = jssearch.search(query);

    if (result.length > 0) {
        var i = 0;
        var resHtml = '';

        for (var key in result) {
            if (i++ > 20) {
                break;
            }
            resHtml = resHtml +
            '<li><a href="' + result[key].file.u.substr(3) +'"><span class="title">' + result[key].file.t + '</span>' +
            '<span class="description">' + result[key].file.d + '</span></a></li>';
        }
        $('#search-results').html(resHtml);
    }
});

// hide the search results on ESC
$(document).on("keyup", function(event) { if (event.which == 27) { $('#search-resultbox').hide(); } });
// hide search results on click to document
$(document).bind('click', function (e) { $('#search-resultbox').hide(); });
// except the following:
searchBox.bind('click', function(e) { e.stopPropagation(); });
$('#search-resultbox').bind('click', function(e) { e.stopPropagation(); });

});</script></body>
</html>
