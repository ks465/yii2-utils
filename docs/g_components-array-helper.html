<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="language" content="en" />
        <link href="./assets/b01f69f9/css/bootstrap.css" rel="stylesheet">
<link href="./assets/9af5cddc/solarized_light.css" rel="stylesheet">
<link href="./assets/34135542/style.css" rel="stylesheet">
<script src="./assets/e36a8b07/jquery.js"></script>
<script src="./assets/b01f69f9/js/bootstrap.js"></script>
<script src="./assets/b3d3834e/jssearch.js"></script>    <title>Array Helper - Components - KHanUtilsGuide</title>
</head>
<body>

<div class="wrap">
    <nav id="w11" class="navbar-inverse navbar-fixed-top navbar"><div class="navbar-header"><button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#w11-collapse"><span class="sr-only">Toggle navigation</span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
<span class="icon-bar"></span></button><a class="navbar-brand" href="./guide-index.html">KHanUtilsGuide</a></div><div id="w11-collapse" class="collapse navbar-collapse"><ul id="w12" class="navbar-nav nav"><li><a href="./g_README.html">Guide</a></li></ul><div class="navbar-form navbar-left" role="search">
  <div class="form-group">
    <input id="searchbox" type="text" class="form-control" placeholder="Search">
  </div>
</div>
</div></nav>
    <div id="search-resultbox" style="display: none;" class="modal-content">
        <ul id="search-results">
        </ul>
    </div>

    
<div class="row">
    <div class="col-md-2">
                <div id="navigation" class="list-group"><a class="list-group-item" href="#navigation-0" data-toggle="collapse" data-parent="#navigation">Documentation <b class="caret"></b></a><div id="navigation-0" class="submenu panel-collapse collapse"><a class="list-group-item" href="./g_documents.html">Document Tips and Tricks</a>
<a class="list-group-item" href="./g_persian.html">Setup for Persian</a></div>
<a class="list-group-item" href="#navigation-1" data-toggle="collapse" data-parent="#navigation">Actions <b class="caret"></b></a><div id="navigation-1" class="submenu panel-collapse collapse"><a class="list-group-item" href="./g_actions-csv-grid-view.html">CSV Grid View</a>
<a class="list-group-item" href="./g_.html">[\KHanS\Utils\widgets\GridView]</a></div>
<a class="list-group-item active" href="#navigation-2" data-toggle="collapse" data-parent="#navigation">Components <b class="caret"></b></a><div id="navigation-2" class="submenu panel-collapse collapse in"><a class="list-group-item active" href="./g_components-array-helper.html">Array Helper</a>
<a class="list-group-item" href="./g_components-file-helper.html">File Helper</a>
<a class="list-group-item" href="./g_components-jalali.html">Jalali and JalaliX</a>
<a class="list-group-item" href="./g_components-math-helper.html">Math Helper</a>
<a class="list-group-item" href="./g_components-sql-formatter.html">SQL Formatter</a>
<a class="list-group-item" href="./g_components-string-helper.html">String Helper</a>
<a class="list-group-item" href="./g_components-view-helper.html">View Helper</a></div>
<a class="list-group-item" href="#navigation-3" data-toggle="collapse" data-parent="#navigation">Columns <b class="caret"></b></a><div id="navigation-3" class="submenu panel-collapse collapse"><a class="list-group-item" href="./g_columns-action-column.html">Action Column</a>
<a class="list-group-item" href="./g_columns-boolean-column.html">Boolean Column</a>
<a class="list-group-item" href="./g_columns-data-column.html">Data Column</a>
<a class="list-group-item" href="./g_columns-enum-column.html">Enum Column</a>
<a class="list-group-item" href="./g_columns-radio-column.html">Radio Column</a></div>
<a class="list-group-item" href="#navigation-4" data-toggle="collapse" data-parent="#navigation">Models <b class="caret"></b></a><div id="navigation-4" class="submenu panel-collapse collapse"><a class="list-group-item" href="./g_models-khan-model.html">Base Model</a>
<a class="list-group-item" href="./g_models-khan-user.html">Base user</a>
<a class="list-group-item" href="./g_models-csv-data-provider.html">CSV DataProvider</a></div>
<a class="list-group-item" href="#navigation-5" data-toggle="collapse" data-parent="#navigation">RBAC <b class="caret"></b></a><div id="navigation-5" class="submenu panel-collapse collapse"><a class="list-group-item" href="./g_rbac-rule-owner.html">Owner Rule</a></div>
<a class="list-group-item" href="#navigation-6" data-toggle="collapse" data-parent="#navigation">Widgets <b class="caret"></b></a><div id="navigation-6" class="submenu panel-collapse collapse"><a class="list-group-item" href="./g_widgets-date-picker.html">Date Picker</a>
<a class="list-group-item" href="./g_widgets-date-range-picker.html">Date Range Picker</a>
<a class="list-group-item" href="./g_widgets-grid-view.html">Grid View</a></div>
<a class="list-group-item" href="#navigation-7" data-toggle="collapse" data-parent="#navigation">Others <b class="caret"></b></a><div id="navigation-7" class="submenu panel-collapse collapse"><a class="list-group-item" href="./g_components-var-dump.html">VarDump</a>
<a class="list-group-item" href="./g_components-sql-formatter.html">SqlFormatter</a>
<a class="list-group-item" href="./g_settings.html">Settings</a>
<a class="list-group-item" href="./g_helpers-migrations.html">Migrations</a>
<a class="list-group-item" href="./g_widgets-menu.html">Overlay Menu</a></div>
<a class="list-group-item" href="#navigation-8" data-toggle="collapse" data-parent="#navigation">StartUp <b class="caret"></b></a><div id="navigation-8" class="submenu panel-collapse collapse"></div>
<a class="list-group-item" href="#navigation-9" data-toggle="collapse" data-parent="#navigation">Sanitizing User Input <b class="caret"></b></a><div id="navigation-9" class="submenu panel-collapse collapse"></div>
<a class="list-group-item" href="#navigation-10" data-toggle="collapse" data-parent="#navigation">RBAC Setup <b class="caret"></b></a><div id="navigation-10" class="submenu panel-collapse collapse"></div></div>    </div>
    <div class="col-md-9 guide-content" role="main">
        <h1>ArrayHelper Class <span id="arrayhelper-class"></span><a href="#arrayhelper-class" class="hashlink">&para;</a></h1>
<div class="toc"><ol><li><a href="#khansutilscomponentsarrayhelperpivot">KHanS\Utils\components\ArrayHelper::pivot</a></li>
<li><a href="#khansutilscomponentsarrayhelpergroupby">KHanS\Utils\components\ArrayHelper::groupBy</a></li></ol></div>
<p>Documentation Edition: 1.0-970803</p>
<p>Class Version: 0.2-970803</p>
<p>This class contains more methods for transforming and reshaping arrays.
It extends \yii\helpers\ArrayHelper so there is only one class to import into namespace.</p>
<h2><span class="broken-link">KHanS\Utils\components\ArrayHelper::pivot</span> <span id="khansutilscomponentsarrayhelperpivot"></span><a href="#khansutilscomponentsarrayhelperpivot" class="hashlink">&para;</a></h2><p>This static method is a transformer, which accepts an array and some row and column identifiers plus a numeric field.
In simple call the output is an array containing sum of all values of the numeric field --pivotValue.
Currently the only aggregating function available is <code>summation</code>.</p>
<p>This methods requires five arguments:</p>
<ol>
<li><p><strong>$inputArray</strong> is an array containing exactly two dimensions. Any simple array or <code>$query-&gt;asArray()-&gt;all()</code> could serve the purpose.</p>
</li>
<li><p><strong>$pivotColumn</strong> is a single string or array of strings, which are names of fields in the input array.
The pivoted array would have columns with key equal to different combinations of these fields values.
Each key segment is separated by <code>.</code>.</p>
</li>
<li><p><strong>$pivotRow</strong> is a single string or array of strings, which are names of fields in the input array. 
The pivoted array would have rows with key equal to different combinations of these fields values. 
Each key segment is separated by <code>.</code>.</p>
</li>
<li><p><strong>$pivotValue</strong> is a single string which is the name of one of the fields, or it is a closure.
If it is a string, the output data cell (value of output_array[$pivotRow][$pivotColumn] element) contains the result of
the given aggregating function of input data. 
If it is a closure, the output data cell is simply output of the closure function. </p>
</li>
<li><p><strong>$aggFunc (<em>optional</em>)</strong> is type of aggregating function to use. Currently it is not used and <em>summation</em> is used.</p>
</li>
</ol>
<p>Calling the method with string <code>$pivotValue</code></p>
<pre><code class="hljs php language-php"><span class="hljs-variable">$inputArray</span> = [
[<span class="hljs-string">'active_year'</span> =&gt; <span class="hljs-string">'91'</span>, <span class="hljs-string">'grade'</span> =&gt; <span class="hljs-string">'MSc'</span>, <span class="hljs-string">'enter_type'</span> =&gt; <span class="hljs-string">'Typical'</span>, <span class="hljs-string">'gender'</span> =&gt; <span class="hljs-string">'Female'</span>, <span class="hljs-string">'students'</span> =&gt; <span class="hljs-string">'503'</span>],
[<span class="hljs-string">'active_year'</span> =&gt; <span class="hljs-string">'92'</span>, <span class="hljs-string">'grade'</span> =&gt; <span class="hljs-string">'MSc'</span>, <span class="hljs-string">'enter_type'</span> =&gt; <span class="hljs-string">'Typical'</span>, <span class="hljs-string">'gender'</span> =&gt; <span class="hljs-string">'Female'</span>, <span class="hljs-string">'students'</span> =&gt; <span class="hljs-string">'552'</span>],
[<span class="hljs-string">'active_year'</span> =&gt; <span class="hljs-string">'93'</span>, <span class="hljs-string">'grade'</span> =&gt; <span class="hljs-string">'MSc'</span>, <span class="hljs-string">'enter_type'</span> =&gt; <span class="hljs-string">'Typical'</span>, <span class="hljs-string">'gender'</span> =&gt; <span class="hljs-string">'Female'</span>, <span class="hljs-string">'students'</span> =&gt; <span class="hljs-string">'589'</span>],
[<span class="hljs-string">'active_year'</span> =&gt; <span class="hljs-string">'91'</span>, <span class="hljs-string">'grade'</span> =&gt; <span class="hljs-string">'MSc'</span>, <span class="hljs-string">'enter_type'</span> =&gt; <span class="hljs-string">'Pardis'</span>, <span class="hljs-string">'gender'</span> =&gt; <span class="hljs-string">'Male'</span>, <span class="hljs-string">'students'</span> =&gt; <span class="hljs-string">'201'</span>],
[<span class="hljs-string">'active_year'</span> =&gt; <span class="hljs-string">'92'</span>, <span class="hljs-string">'grade'</span> =&gt; <span class="hljs-string">'MSc'</span>, <span class="hljs-string">'enter_type'</span> =&gt; <span class="hljs-string">'Pardis'</span>, <span class="hljs-string">'gender'</span> =&gt; <span class="hljs-string">'Male'</span>, <span class="hljs-string">'students'</span> =&gt; <span class="hljs-string">'200'</span>],
[<span class="hljs-string">'active_year'</span> =&gt; <span class="hljs-string">'95'</span>, <span class="hljs-string">'grade'</span> =&gt; <span class="hljs-string">'PhD'</span>, <span class="hljs-string">'enter_type'</span> =&gt; <span class="hljs-string">'Pardis'</span>, <span class="hljs-string">'gender'</span> =&gt; <span class="hljs-string">'Male'</span>, <span class="hljs-string">'students'</span> =&gt; <span class="hljs-string">'54'</span>],
[<span class="hljs-string">'active_year'</span> =&gt; <span class="hljs-string">'96'</span>, <span class="hljs-string">'grade'</span> =&gt; <span class="hljs-string">'PhD'</span>, <span class="hljs-string">'enter_type'</span> =&gt; <span class="hljs-string">'Pardis'</span>, <span class="hljs-string">'gender'</span> =&gt; <span class="hljs-string">'Male'</span>, <span class="hljs-string">'students'</span> =&gt; <span class="hljs-string">'44'</span>],
];

ArrayHelper::pivot(<span class="hljs-variable">$inputArray</span>, <span class="hljs-string">'active_year'</span>, [<span class="hljs-string">'grade'</span>,<span class="hljs-string">'gender'</span>], <span class="hljs-string">'students'</span>);

[
 <span class="hljs-string">'MSc.Female'</span> =&gt; [ <span class="hljs-string">'grade'</span> =&gt; <span class="hljs-string">'MSc'</span>, <span class="hljs-string">'gender'</span> =&gt; <span class="hljs-string">'Female'</span>, <span class="hljs-string">'91_'</span> =&gt; <span class="hljs-number">503</span>, <span class="hljs-string">'92_'</span> =&gt; <span class="hljs-number">552</span>, <span class="hljs-string">'93_'</span> =&gt; <span class="hljs-number">589</span>, ],
 <span class="hljs-string">'MSc.Male'</span> =&gt; [ <span class="hljs-string">'grade'</span> =&gt; <span class="hljs-string">'MSc'</span>, <span class="hljs-string">'gender'</span> =&gt; <span class="hljs-string">'Male'</span>, <span class="hljs-string">'91_'</span> =&gt; <span class="hljs-number">201</span>, <span class="hljs-string">'92_'</span> =&gt; <span class="hljs-number">200</span>, ],
 <span class="hljs-string">'PhD.Male'</span> =&gt; [ <span class="hljs-string">'grade'</span> =&gt; <span class="hljs-string">'PhD'</span>, <span class="hljs-string">'gender'</span> =&gt; <span class="hljs-string">'Male'</span>, <span class="hljs-string">'95_'</span> =&gt; <span class="hljs-number">54</span>, <span class="hljs-string">'96_'</span> =&gt; <span class="hljs-number">44</span>, ],
];
</code></pre>
<p>If called with a closure instead of a field name, the output is the result of the closure function without aggregation. </p>
<pre><code class="hljs php language-php"> ArrayHelper::pivot(<span class="hljs-variable">$inputArray</span>, [<span class="hljs-string">'enter_type'</span>,<span class="hljs-string">'gender'</span>], <span class="hljs-string">'grade'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(<span class="hljs-variable">$dataArray</span>)</span></span>{ 
 <span class="hljs-keyword">return</span> <span class="hljs-variable">$dataArray</span>[<span class="hljs-string">'active_year'</span>] . <span class="hljs-string">'/'</span> . <span class="hljs-variable">$dataArray</span>[<span class="hljs-string">'students'</span>];
});

[
 <span class="hljs-string">'MSc'</span> =&gt; [<span class="hljs-string">'grade'</span> =&gt; <span class="hljs-string">'MSc'</span>, <span class="hljs-string">'Typical.Female'</span> =&gt; <span class="hljs-string">'93/589'</span>, <span class="hljs-string">'Pardis.Male'</span> =&gt; <span class="hljs-string">'92/200'</span>,],
 <span class="hljs-string">'PhD'</span> =&gt; [<span class="hljs-string">'grade'</span> =&gt; <span class="hljs-string">'PhD'</span>, <span class="hljs-string">'Pardis.Male'</span> =&gt; <span class="hljs-string">'96/44'</span>,],
];
</code></pre>
<h2><span class="broken-link">KHanS\Utils\components\ArrayHelper::groupBy</span> <span id="khansutilscomponentsarrayhelpergroupby"></span><a href="#khansutilscomponentsarrayhelpergroupby" class="hashlink">&para;</a></h2><p>This static method is very similar to <a href="#pivot">Pivot</a> method above. The only difference is that there is no pivoting columns
here. For the current version when using closure, the output array contains one addition column named <code>_data_</code>. 
This column contains the result of the closure function. If the <code>$pivotValue</code> is string, the same field contains the output value.
This methods requires four arguments:</p>
<ol>
<li><p><strong>$inputArray</strong> is an array containing exactly two dimensions. Any simple array or <code>$query-&gt;asArray()-&gt;all()</code> could serve the purpose.</p>
</li>
<li><p><strong>$pivotRow</strong> is a single string or array of strings, which are names of fields in the input array. 
The pivoted array would have rows with key equal to different combinations of these fields values. 
Each key segment is separated by <code>.</code>.</p>
</li>
<li><p><strong>$pivotValue</strong> is a single string which is the name of one of the fields, or it is a closure.
If it is a string, the output data cell (value of output_array[$pivotRow][$pivotValue] element) contains the result of
the given aggregating function of input data. 
If it is a closure, the output data cell (value of output_array[$pivotRow]['_data_'] element) is simply output of the closure function. </p>
</li>
<li><p><strong>$aggFunc (<em>optional</em>)</strong> is type of aggregating function to use. Currently it is not used and <em>summation</em> is used.</p>
</li>
</ol>
<p> Calling the method with string <code>$pivotValue</code></p>
<pre><code class="hljs php language-php">ArrayHelper::groupBy(<span class="hljs-variable">$allData</span>, [<span class="hljs-string">'grade'</span>,<span class="hljs-string">'gender'</span>], <span class="hljs-string">'students'</span>);

[
 <span class="hljs-string">'MSc.Female'</span> =&gt; [<span class="hljs-string">'active_year'</span> =&gt; <span class="hljs-string">'91'</span>, <span class="hljs-string">'grade'</span> =&gt; <span class="hljs-string">'MSc'</span>, <span class="hljs-string">'enter_type'</span> =&gt; <span class="hljs-string">'Typical'</span>, <span class="hljs-string">'gender'</span> =&gt; <span class="hljs-string">'Female'</span>, <span class="hljs-string">'students'</span> =&gt; <span class="hljs-number">1644</span>,],
 <span class="hljs-string">'MSc.Male'</span> =&gt; [<span class="hljs-string">'active_year'</span> =&gt; <span class="hljs-string">'91'</span>, <span class="hljs-string">'grade'</span> =&gt; <span class="hljs-string">'MSc'</span>, <span class="hljs-string">'enter_type'</span> =&gt; <span class="hljs-string">'Pardis'</span>, <span class="hljs-string">'gender'</span> =&gt; <span class="hljs-string">'Male'</span>, <span class="hljs-string">'students'</span> =&gt; <span class="hljs-number">401</span>,],
 <span class="hljs-string">'PhD.Male'</span> =&gt; [<span class="hljs-string">'active_year'</span> =&gt; <span class="hljs-string">'95'</span>, <span class="hljs-string">'grade'</span> =&gt; <span class="hljs-string">'PhD'</span>, <span class="hljs-string">'enter_type'</span> =&gt; <span class="hljs-string">'Pardis'</span>, <span class="hljs-string">'gender'</span> =&gt; <span class="hljs-string">'Male'</span>, <span class="hljs-string">'students'</span> =&gt; <span class="hljs-number">98</span>,],
];
</code></pre>
<p>If called with a closure instead of a field name, the output is the result of the closure function without aggregation. </p>
<pre><code class="hljs php language-php">ArrayHelper::groupBy(<span class="hljs-variable">$query</span>-&gt;all(), <span class="hljs-string">'short_name'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(<span class="hljs-variable">$dataArray</span>)</span></span>{
 <span class="hljs-keyword">return</span> <span class="hljs-variable">$dataArray</span>[<span class="hljs-string">'total'</span>] / <span class="hljs-variable">$dataArray</span>[<span class="hljs-string">'students'</span>];
});

[
 <span class="hljs-string">'MSc.Female'</span> =&gt; [<span class="hljs-string">'active_year'</span> =&gt; <span class="hljs-number">91</span>, <span class="hljs-string">'grade'</span> =&gt; <span class="hljs-string">'MSc'</span>, <span class="hljs-string">'enter_type'</span> =&gt; <span class="hljs-string">'Typical'</span>, <span class="hljs-string">'gender'</span> =&gt; <span class="hljs-string">'Female'</span>, <span class="hljs-string">'students'</span> =&gt; <span class="hljs-number">503</span>, <span class="hljs-string">'_data_'</span> =&gt; <span class="hljs-string">'92/552'</span>,],
 <span class="hljs-string">'MSc.Male'</span> =&gt; [<span class="hljs-string">'active_year'</span> =&gt; <span class="hljs-number">93</span>, <span class="hljs-string">'grade'</span> =&gt; <span class="hljs-string">'MSc'</span>, <span class="hljs-string">'enter_type'</span> =&gt; <span class="hljs-string">'Typical'</span>, <span class="hljs-string">'gender'</span> =&gt; <span class="hljs-string">'Male'</span>, <span class="hljs-string">'students'</span> =&gt; <span class="hljs-number">589</span>, <span class="hljs-string">'_data_'</span> =&gt; <span class="hljs-string">'92/200'</span>,],
 <span class="hljs-string">'PhD.Male'</span> =&gt; [<span class="hljs-string">'active_year'</span> =&gt; <span class="hljs-number">91</span>, <span class="hljs-string">'grade'</span> =&gt; <span class="hljs-string">'PhD'</span>, <span class="hljs-string">'enter_type'</span> =&gt; <span class="hljs-string">'Pardis'</span>, <span class="hljs-string">'gender'</span> =&gt; <span class="hljs-string">'Male'</span>, <span class="hljs-string">'students'</span> =&gt; <span class="hljs-number">54</span>, <span class="hljs-string">'_data_'</span> =&gt; <span class="hljs-string">'93/44'</span>,],
 <span class="hljs-string">'PhD.Female'</span> =&gt; [<span class="hljs-string">'active_year'</span> =&gt; <span class="hljs-number">93</span>, <span class="hljs-string">'grade'</span> =&gt; <span class="hljs-string">'PhD'</span>, <span class="hljs-string">'enter_type'</span> =&gt; <span class="hljs-string">'Pardis'</span>, <span class="hljs-string">'gender'</span> =&gt; <span class="hljs-string">'Female'</span>, <span class="hljs-string">'students'</span> =&gt; <span class="hljs-number">44</span>, <span class="hljs-string">'_data_'</span> =&gt; <span class="hljs-string">'93/44'</span>,],
];
</code></pre>
        <div class="toplink"><a href="#" class="h1" title="go to top"><span class="glyphicon glyphicon-arrow-up"></a></div>
    </div>
</div>


</div>

<footer class="footer">
        <p class="pull-right"><small>Page generated on Sun, 25 Nov 2018 16:04:53 +0000</small></p>
    Powered by <a href="http://www.yiiframework.com/" rel="external">Yii Framework</a></footer>

<script>jQuery(function ($) {
    var shiftWindow = function () { scrollBy(0, -50) };
    if (location.hash) setTimeout(shiftWindow, 1);
    window.addEventListener("hashchange", shiftWindow);
var element = document.createElement("script");
element.src = "./jssearch.index.js";
document.body.appendChild(element);

var searchBox = $('#searchbox');

// search when typing in search field
searchBox.on("keyup", function(event) {
    var query = $(this).val();

    if (query == '' || event.which == 27) {
        $('#search-resultbox').hide();
        return;
    } else if (event.which == 13) {
        var selectedLink = $('#search-resultbox a.selected');
        if (selectedLink.length != 0) {
            document.location = selectedLink.attr('href');
            return;
        }
    } else if (event.which == 38 || event.which == 40) {
        $('#search-resultbox').show();

        var selected = $('#search-resultbox a.selected');
        if (selected.length == 0) {
            $('#search-results').find('a').first().addClass('selected');
        } else {
            var next;
            if (event.which == 40) {
                next = selected.parent().next().find('a').first();
            } else {
                next = selected.parent().prev().find('a').first();
            }
            if (next.length != 0) {
                var resultbox = $('#search-results');
                var position = next.position();

//              TODO scrolling is buggy and jumps around
//                resultbox.scrollTop(Math.floor(position.top));
//                console.log(position.top);

                selected.removeClass('selected');
                next.addClass('selected');
            }
        }

        return;
    }
    $('#search-resultbox').show();
    $('#search-results').html('<li><span class="no-results">No results</span></li>');

    var result = jssearch.search(query);

    if (result.length > 0) {
        var i = 0;
        var resHtml = '';

        for (var key in result) {
            if (i++ > 20) {
                break;
            }
            resHtml = resHtml +
            '<li><a href="' + result[key].file.u.substr(3) +'"><span class="title">' + result[key].file.t + '</span>' +
            '<span class="description">' + result[key].file.d + '</span></a></li>';
        }
        $('#search-results').html(resHtml);
    }
});

// hide the search results on ESC
$(document).on("keyup", function(event) { if (event.which == 27) { $('#search-resultbox').hide(); } });
// hide search results on click to document
$(document).bind('click', function (e) { $('#search-resultbox').hide(); });
// except the following:
searchBox.bind('click', function(e) { e.stopPropagation(); });
$('#search-resultbox').bind('click', function(e) { e.stopPropagation(); });

});</script></body>
</html>
